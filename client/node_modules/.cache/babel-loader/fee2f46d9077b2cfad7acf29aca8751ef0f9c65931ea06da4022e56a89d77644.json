{"ast":null,"code":"var _jsxFileName = \"/Users/dariabrusnitsina/Yandex.Disk.localized/Programming/Projects/react-e-commerce/client/src/components/ShopLayout/shopPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { paginate } from \"../../utils/paginate\";\nimport _ from \"lodash\";\nimport ProductCard from \"../common/productCard\";\nimport Pagination from \"../common/pagination\";\nimport CategoriesList from \"./categoriesList\";\nimport SortButton from \"./sortButton\";\nimport { useSelector } from \"react-redux\";\nimport { getItems } from \"../../store/items\";\nimport { getCategories } from \"../../store/categories\";\nimport SkeletonShop from \"../skeleton/skeletonShop\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ShopPage = () => {\n  _s();\n  const [currentPage, setCurrentPage] = useState(1);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState();\n  const [sortBy, setSortBy] = useState(\"asc\");\n  const pageSize = 6;\n  const items = useSelector(getItems());\n  const categories = useSelector(getCategories());\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [selectedCategory, searchQuery]);\n  const handleCategorySelect = item => {\n    if (searchQuery !== \"\") setSearchQuery(\"\");\n    setSelectedCategory(item);\n  };\n  const handleSearchQuery = _ref => {\n    let {\n      target\n    } = _ref;\n    setSelectedCategory(undefined);\n    setSearchQuery(target.value);\n  };\n  const handlePageChange = pageIndex => {\n    setCurrentPage(pageIndex);\n  };\n  const handleSort = item => {\n    setSortBy(item);\n  };\n  if (items) {\n    const filteredItems = searchQuery ? items.filter(item => item.name.toLowerCase().indexOf(searchQuery.toLowerCase()) !== -1) : selectedCategory ? items.filter(item => JSON.stringify(item.category) === JSON.stringify(selectedCategory.id)) : items;\n    const count = filteredItems.length;\n    const sortedItems = _.orderBy(filteredItems, ['price'], sortBy);\n    const itemsCrop = paginate(sortedItems, currentPage, pageSize);\n    const clearFilter = () => {\n      setSelectedCategory();\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shop\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"title\",\n              children: \"Lorem ipsum dolor sit amet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"subtitle\",\n              children: \"Praesentium facere quo consequatur laudantium, omnis mollitia eaque.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shop__section\",\n          children: [categories && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shop__categories\",\n            children: [/*#__PURE__*/_jsxDEV(CategoriesList, {\n              selectedItem: selectedCategory,\n              items: categories,\n              onItemSelect: handleCategorySelect\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"reset-categories-btn\",\n              onClick: clearFilter,\n              children: [\" \", \"reset filter\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shop__items\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shop__items--bar\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"search-input\",\n                type: \"text\",\n                name: \"searchQuery\",\n                placeholder: \"Search...\",\n                onChange: handleSearchQuery,\n                value: searchQuery\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(SortButton, {\n                onSort: handleSort,\n                selectedSort: sortBy\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shop__items--list\",\n              children: count > 0 && itemsCrop.map(item => /*#__PURE__*/_jsxDEV(ProductCard, {\n                item: item,\n                width: 270\n              }, item.name, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex justify-content-center\",\n              children: /*#__PURE__*/_jsxDEV(Pagination, {\n                itemsCount: count,\n                pageSize: pageSize,\n                currentPage: currentPage,\n                onPageChange: handlePageChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(SkeletonShop, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 12\n  }, this);\n};\n_s(ShopPage, \"nKE3ZZ0xRSPCrbw76nZP/07Glqc=\", false, function () {\n  return [useSelector, useSelector];\n});\n_c = ShopPage;\nexport default ShopPage;\nvar _c;\n$RefreshReg$(_c, \"ShopPage\");","map":{"version":3,"names":["React","useState","useEffect","paginate","_","ProductCard","Pagination","CategoriesList","SortButton","useSelector","getItems","getCategories","SkeletonShop","ShopPage","currentPage","setCurrentPage","searchQuery","setSearchQuery","selectedCategory","setSelectedCategory","sortBy","setSortBy","pageSize","items","categories","handleCategorySelect","item","handleSearchQuery","target","undefined","value","handlePageChange","pageIndex","handleSort","filteredItems","filter","name","toLowerCase","indexOf","JSON","stringify","category","id","count","length","sortedItems","orderBy","itemsCrop","clearFilter","map"],"sources":["/Users/dariabrusnitsina/Yandex.Disk.localized/Programming/Projects/react-e-commerce/client/src/components/ShopLayout/shopPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { paginate } from \"../../utils/paginate\"\nimport _ from \"lodash\";\nimport ProductCard from \"../common/productCard\";\nimport Pagination from \"../common/pagination\";\nimport CategoriesList from \"./categoriesList\";\nimport SortButton from \"./sortButton\";\nimport {useSelector} from \"react-redux\";\nimport {getItems} from \"../../store/items\";\nimport {getCategories} from \"../../store/categories\";\nimport SkeletonShop from \"../skeleton/skeletonShop\";\n\nconst ShopPage = () => {\n    const [currentPage, setCurrentPage] = useState(1);\n    const [searchQuery, setSearchQuery] = useState(\"\");\n    const [selectedCategory, setSelectedCategory] = useState();\n    const [sortBy, setSortBy] = useState(\"asc\");\n    const pageSize = 6;\n\n    const items = useSelector(getItems());\n    const categories = useSelector(getCategories());\n\n    useEffect(() => {\n        setCurrentPage(1);\n    }, [selectedCategory, searchQuery]);\n\n    const handleCategorySelect = (item) => {\n        if (searchQuery !== \"\") setSearchQuery(\"\");\n        setSelectedCategory(item);\n    };\n    const handleSearchQuery = ({ target }) => {\n        setSelectedCategory(undefined);\n        setSearchQuery(target.value);\n    };\n\n    const handlePageChange = (pageIndex) => {\n        setCurrentPage(pageIndex);\n    };\n    const handleSort = (item) => {\n        setSortBy(item);\n    };\n\n    if (items) {\n        const filteredItems = searchQuery\n            ? items.filter(\n                (item) =>\n                    item.name\n                        .toLowerCase()\n                        .indexOf(searchQuery.toLowerCase()) !== -1\n            )\n            : selectedCategory\n                ? items.filter(\n                    (item) =>\n                        JSON.stringify(item.category) ===\n                        JSON.stringify(selectedCategory.id)\n                )\n                : items;\n\n        const count = filteredItems.length;\n        const sortedItems = _.orderBy(\n            filteredItems,\n            ['price'],\n            sortBy\n        );\n\n        const itemsCrop = paginate(sortedItems, currentPage, pageSize);\n        const clearFilter = () => {\n            setSelectedCategory();\n        };\n\n        return (\n            <div className=\"shop\">\n                <div className=\"container\">\n                <header>\n                    <div className=\"container\">\n                        <h1 className=\"title\">Lorem ipsum dolor sit amet</h1>\n                        <p className=\"subtitle\">Praesentium facere quo consequatur laudantium, omnis mollitia eaque.</p>\n                    </div>\n                </header>\n\n                <div className=\"shop__section\">\n                    {categories && (\n                            <div className=\"shop__categories\">\n                                <CategoriesList\n                                    selectedItem={selectedCategory}\n                                    items={categories}\n                                    onItemSelect={handleCategorySelect}\n                                />\n                                <button\n                                    className=\"reset-categories-btn\"\n                                    onClick={clearFilter}\n                                >\n                                    {\" \"}\n                                    reset filter\n                                </button>\n                            </div>\n                    )}\n                    <div className=\"shop__items\">\n                        <div className=\"shop__items--bar\">\n                            <input\n                                className=\"search-input\"\n                                type=\"text\"\n                                name=\"searchQuery\"\n                                placeholder=\"Search...\"\n                                onChange={handleSearchQuery}\n                                value={searchQuery}\n                            />\n                            <SortButton onSort={handleSort} selectedSort={sortBy}/>\n                        </div>\n\n                        <div className=\"shop__items--list\">\n                            {count > 0 &&\n                                itemsCrop.map((item) => (\n                                    <ProductCard key={item.name} item={item} width={270}/>\n                                ))\n                            }\n                        </div>\n\n                        <div className=\"d-flex justify-content-center\">\n                            <Pagination\n                                itemsCount={count}\n                                pageSize={pageSize}\n                                currentPage={currentPage}\n                                onPageChange={handlePageChange}\n                            />\n                        </div>\n\n                    </div>\n                </div>\n                </div>\n            </div>\n        );\n    }\n    return <SkeletonShop />;\n};\n\nexport default ShopPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}