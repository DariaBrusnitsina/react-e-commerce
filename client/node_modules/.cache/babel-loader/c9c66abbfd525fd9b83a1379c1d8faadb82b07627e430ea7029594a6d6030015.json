{"ast":null,"code":"var _jsxFileName = \"/Users/dariabrusnitsina/Yandex.Disk.localized/Programming/Projects/react-e-commerce/src/hooks/useCart.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\n// import { toast } from \"react-toastify\";\n// import qualityService from \"../services/quality.service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/React.createContext();\nexport const useCart = () => {\n  _s();\n  return useContext(CartContext);\n};\n_s(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const CartProvider = _ref => {\n  _s2();\n  let {\n    children\n  } = _ref;\n  const [cart, setCart] = useState([]);\n  const [errors, setErrors] = useState(null);\n  const [isLoading, setLoading] = useState(true);\n  const prevState = useRef();\n  useEffect(() => {\n    const cartValue = localStorage.getItem(\"cart\");\n    if (cartValue) {\n      const cartStorage = JSON.parse(cartValue);\n      setCart(cartStorage);\n    }\n  }, []);\n  useEffect(() => {\n    const getQualities = () => {\n      return cart;\n      // try {\n      //     // setCart(content)\n      //     setLoading(false)\n      // } catch (error) {\n      //     errorCatcher(error)\n      // }\n    };\n\n    getQualities();\n  }, []);\n  const getQuality = id => {\n    return cart.find(q => q._id === id);\n  };\n  const updateQuality = async _ref2 => {\n    let {\n      _id: id,\n      ...data\n    } = _ref2;\n    try {\n      // const {content} = await qualityService.update(id, data)\n      // setCart((prevState) => prevState.map((item) => {\n      //     if (item._id === content._id) {\n      //         return content\n      //     }\n      //     return item\n      // }))\n      // return content\n    } catch (error) {\n      errorCatcher(error);\n    }\n  };\n  const addCartItem = data => {\n    setCart(prevState => [...prevState, data]);\n  };\n  const cleatCart = () => {\n    setCart([]);\n    localStorage.setItem(\"cart\", [null]);\n  };\n  const deleteQuality = async id => {\n    try {\n      // const {content} = await qualityService.delete(id)\n      // setQualities((prevState) => {\n      //     return prevState.filter(item => item._id !== content._id)\n      // })\n    } catch (error) {\n      errorCatcher(error);\n    }\n  };\n  function errorCatcher(error) {\n    const {\n      message\n    } = error.response.data;\n    setErrors(message);\n  }\n  useEffect(() => {\n    if (errors !== null) {\n      // toast(errors)\n      setErrors(null);\n    }\n  }, [errors]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      addCartItem,\n      cleatCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n_s2(CartProvider, \"lSUs6RsXSG0ZbjNZnC4/rO25n98=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","useContext","useEffect","useRef","useState","CartContext","createContext","useCart","CartProvider","children","cart","setCart","errors","setErrors","isLoading","setLoading","prevState","cartValue","localStorage","getItem","cartStorage","JSON","parse","getQualities","getQuality","id","find","q","_id","updateQuality","data","error","errorCatcher","addCartItem","cleatCart","setItem","deleteQuality","message","response"],"sources":["/Users/dariabrusnitsina/Yandex.Disk.localized/Programming/Projects/react-e-commerce/src/hooks/useCart.jsx"],"sourcesContent":["import React, { useContext, useEffect, useRef, useState } from \"react\";\n// import { toast } from \"react-toastify\";\n// import qualityService from \"../services/quality.service\";\n\nconst CartContext = React.createContext()\nexport const useCart = () => {\n    return useContext(CartContext)\n}\nexport const CartProvider = ({children}) => {\n    const [cart, setCart] = useState([])\n    const [errors, setErrors] = useState(null)\n    const [isLoading, setLoading] = useState(true)\n    const prevState = useRef()\n\n    useEffect(() => {\n        const cartValue = localStorage.getItem(\"cart\")\n        if (cartValue) {\n            const cartStorage = JSON.parse(cartValue)\n            setCart(cartStorage)\n        }\n    }, []);\n\n    useEffect(() => {\n        const getQualities = () => {\n            return cart\n            // try {\n            //     // setCart(content)\n            //     setLoading(false)\n            // } catch (error) {\n            //     errorCatcher(error)\n            // }\n        }\n        getQualities()\n    },[])\n\n    const getQuality = (id) => {\n        return cart.find((q) => q._id === id)\n    };\n\n    const updateQuality = async ({_id: id, ...data}) => {\n        try {\n            // const {content} = await qualityService.update(id, data)\n            // setCart((prevState) => prevState.map((item) => {\n            //     if (item._id === content._id) {\n            //         return content\n            //     }\n            //     return item\n            // }))\n            // return content\n\n        } catch (error) {\n            errorCatcher(error)\n        }\n    }\n\n    const addCartItem = (data) => {\n        setCart(prevState => [...prevState, data])\n    }\n\n    const cleatCart = () => {\n        setCart([])\n        localStorage.setItem(\"cart\", [null])\n\n    }\n\n    const deleteQuality = async(id) => {\n        try {\n            // const {content} = await qualityService.delete(id)\n            // setQualities((prevState) => {\n            //     return prevState.filter(item => item._id !== content._id)\n            // })\n\n        } catch (error) {\n            errorCatcher(error)\n        }\n    }\n\n    function errorCatcher(error) {\n        const {message} = error.response.data\n        setErrors(message)\n    }\n\n    useEffect(() => {\n        if (errors !== null) {\n            // toast(errors)\n            setErrors(null)\n        }\n    }, [errors])\n    return (\n    <CartContext.Provider value={{cart, addCartItem, cleatCart}}>\n        {children}\n    </CartContext.Provider>)\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}